# Migration `20200819112536-add-list-model`

This migration has been generated by Khanh Le at 8/19/2020, 6:25:36 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."List" (
"id" text   NOT NULL ,
"bookId" text   NOT NULL ,
"ownerId" text   NOT NULL ,
"rating" integer   NOT NULL ,
"notes" text   NOT NULL ,
"startDate" Decimal(65,30)   NOT NULL ,
"finishDate" Decimal(65,30)   NOT NULL ,
PRIMARY KEY ("id")
)

ALTER TABLE "public"."List" ADD FOREIGN KEY ("bookId")REFERENCES "public"."Book"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."List" ADD FOREIGN KEY ("ownerId")REFERENCES "public"."User"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200819102510-add-book-model..20200819112536-add-list-model
--- datamodel.dml
+++ datamodel.dml
@@ -4,15 +4,16 @@
 }
 datasource db {
     provider = "postgres"
-    url = "***"
+    url = "***"
 }
 model User {
     id       String @id @default(uuid())
     email    String @unique
     password String
+    lists    List[]
 }
 model Book {
     id            String @id @default(uuid())
@@ -21,5 +22,18 @@
     coverImageUrl String
     pageCount     Int
     publisher     String
     synopsis      String
+    lists         List[]
 }
+
+model List {
+    id         String @id @default(uuid())
+    bookId     String
+    book       Book   @relation(references: [id], fields: [bookId])
+    ownerId    String
+    owner      User   @relation(references: [id], fields: [ownerId])
+    rating     Int
+    notes      String
+    startDate  Float
+    finishDate Float
+}
```


