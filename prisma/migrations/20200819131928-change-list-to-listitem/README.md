# Migration `20200819131928-change-list-to-listitem`

This migration has been generated by Khanh Le at 8/19/2020, 8:19:28 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."List" DROP CONSTRAINT "List_bookId_fkey"

ALTER TABLE "public"."List" DROP CONSTRAINT "List_ownerId_fkey"

CREATE TABLE "public"."ListItem" (
"id" text   NOT NULL ,
"bookId" text   NOT NULL ,
"ownerId" text   NOT NULL ,
"rating" integer   ,
"notes" text   ,
"startDate" timestamp(3)   NOT NULL DEFAULT CURRENT_TIMESTAMP,
"finishDate" timestamp(3)   NOT NULL DEFAULT CURRENT_TIMESTAMP,
PRIMARY KEY ("id")
)

ALTER TABLE "public"."ListItem" ADD FOREIGN KEY ("bookId")REFERENCES "public"."Book"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."ListItem" ADD FOREIGN KEY ("ownerId")REFERENCES "public"."User"("id") ON DELETE CASCADE ON UPDATE CASCADE

DROP TABLE "public"."List"
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200819112536-add-list-model..20200819131928-change-list-to-listitem
--- datamodel.dml
+++ datamodel.dml
@@ -4,36 +4,36 @@
 }
 datasource db {
     provider = "postgres"
-    url = "***"
+    url = "***"
 }
 model User {
-    id       String @id @default(uuid())
-    email    String @unique
+    id       String     @id @default(uuid())
+    email    String     @unique
     password String
-    lists    List[]
+    lists    ListItem[]
 }
 model Book {
-    id            String @id @default(uuid())
+    id            String     @id @default(uuid())
     title         String
     author        String
     coverImageUrl String
     pageCount     Int
     publisher     String
     synopsis      String
-    lists         List[]
+    lists         ListItem[]
 }
-model List {
-    id         String @id @default(uuid())
+model ListItem {
+    id         String   @id @default(uuid())
     bookId     String
-    book       Book   @relation(references: [id], fields: [bookId])
+    book       Book     @relation(references: [id], fields: [bookId])
     ownerId    String
-    owner      User   @relation(references: [id], fields: [ownerId])
-    rating     Int
-    notes      String
-    startDate  Float
-    finishDate Float
+    owner      User     @relation(references: [id], fields: [ownerId])
+    rating     Int?
+    notes      String?
+    startDate  DateTime @default(now())
+    finishDate DateTime @default(now())
 }
```


